<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>UIIC Motor Payout Calculator (FY 2025-26)</title>
<style>
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; padding: 16px; color: #111; }
  h1 { font-size: 1.25rem; margin-bottom: 8px; }
  .card { border: 1px solid #ddd; border-radius: 10px; padding: 12px; margin-bottom: 12px; }
  label { display: block; font-weight: 600; margin: 10px 0 6px; }
  select, input { width: 100%; padding: 10px; border: 1px solid #bbb; border-radius: 8px; }
  .row { display: grid; grid-template-columns: 1fr; gap: 8px; }
  @media (min-width: 720px) { .row { grid-template-columns: 1fr 1fr; } }
  .output { background: #fafafa; border: 1px dashed #ccc; border-radius: 10px; padding: 12px; }
  .kpi { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
  .kpi div { background: white; border: 1px solid #eee; border-radius: 8px; padding: 10px; }
  .kpi .label { font-size: 0.85rem; color: #666; }
  .kpi .value { font-size: 1.1rem; font-weight: 700; }
  .note { font-size: 0.85rem; color: #444; margin-top: 8px; }
  .btn { background: #0b6cff; color: white; border: none; border-radius: 8px; padding: 12px; font-weight: 700; width: 100%; margin-top: 10px; }
  .btn:active { transform: scale(0.99); }
  .hidden { display: none !important; }
</style>
</head>
<body>
  <h1>UIIC Motor Payout Calculator (FY 2025–26)</h1>
  <div class="card">
    <div class="row">
      <div>
        <label for="vehicleClass">Vehicle class</label>
        <select id="vehicleClass">
          <option value="private_car">Private Car</option>
          <option value="two_wheeler">Two Wheeler</option>
          <option value="gcv">Goods Carrying Vehicle (GCV)</option>
          <option value="misc">Misc Vehicles</option>
          <option value="motor_trade">Motor Trade</option>
          <option value="standalone_cpa">Standalone CPA</option>
        </select>
      </div>
      <div>
        <label for="policyType">Policy type</label>
        <select id="policyType">
          <option value="bundled">Bundled (1+3)</option>
          <option value="package">Package</option>
          <option value="saod">SAOD</option>
          <option value="satp">SATP</option>
        </select>
      </div>
    </div>

    <div class="row">
      <div>
        <label for="businessType">Business type</label>
        <select id="businessType">
          <option value="new">New</option>
          <option value="renewal">Renewal/Rollover</option>
          <option value="all">All business types</option>
        </select>
      </div>
      <div>
        <label for="fuel">Fuel type</label>
        <select id="fuel">
          <option value="non_electric">Non-Electric</option>
          <option value="electric">Electric</option>
        </select>
      </div>
    </div>

    <div class="row">
      <div id="ccBandWrapper">
        <label for="ccBand">CC band (or GVW band / Misc type)</label>
        <select id="ccBand">
          <!-- Private Car bands -->
          <option value="pc_upto_1000">Private Car: <=1000 cc</option>
          <option value="pc_1001_1200">Private Car: >1000 and <=1200 cc</option>
          <option value="pc_1201_1500">Private Car: >1200 and <=1500 cc</option>
          <option value="pc_1501_2000">Private Car: >1500 and <=2000 cc</option>
          <option value="pc_above_2000">Private Car: >2000 cc</option>

          <!-- Two Wheeler bands -->
          <option value="tw_upto_350">Two Wheeler: <=350 cc</option>
          <option value="tw_above_350">Two Wheeler: >350 cc</option>
          <option value="tw_electric_any">Two Wheeler: Electric (any cc)</option>

          <!-- GCV bands (GVW) -->
          <option value="gcv_le_2000">GCV: GVW <= 2000</option>
          <option value="gcv_2001_3500">GCV: 2000 < GVW <= 3500</option>
          <option value="gcv_3501_7500">GCV: 3500 < GVW <= 7500</option>
          <option value="gcv_7501_10000">GCV: 7500 < GVW <= 10000</option>
          <option value="gcv_10001_12000">GCV: 10000 < GVW <= 12000</option>
          <option value="gcv_12001_20000">GCV: 12000 < GVW <= 20000</option>
          <option value="gcv_20001_25000">GCV: 20000 < GVW <= 25000</option>
          <option value="gcv_25001_35000">GCV: 25000 < GVW <= 35000</option>
          <option value="gcv_35001_40000">GCV: 35000 < GVW <= 40000</option>
          <option value="gcv_gt_40000">GCV: GVW > 40000</option>
          <option value="gcv_ecart">GCV: E-Cart</option>

          <!-- Misc Vehicles types -->
          <option value="misc_ambulance">Misc: Ambulances</option>
          <option value="misc_tractor">Misc: Agricultural Tractors</option>
          <option value="misc_other">Misc: All other Miscellaneous Vehicles</option>
        </select>
      </div>
      <div id="pcSegmentWrapper">
        <label for="pcSegment">Private Car segment (Non-Electric)</label>
        <select id="pcSegment">
          <option value="standard">Standard (other than restricted segments)</option>
          <option value="diesel_upto_1500">Restricted: Diesel <=1500 cc</option>
          <option value="above_2500_except_brands">Restricted: >2500 cc (except Tata, Maruti, Mahindra, Toyota, Hyundai, Honda, Kia)</option>
        </select>
      </div>
    </div>

    <div class="row">
      <div>
        <label for="state">Registration state</label>
        <select id="state">
          <option value="Tamil Nadu">Tamil Nadu</option>
          <option value="Kerala">Kerala</option>
          <option value="Karnataka">Karnataka</option>
          <option value="Madhya Pradesh">Madhya Pradesh</option>
          <option value="Assam">Assam</option>
          <option value="Haryana">Haryana</option>
          <option value="Rajasthan">Rajasthan</option>
          <option value="Uttar Pradesh">Uttar Pradesh</option>
          <option value="Other">Other than above states</option>
        </select>
      </div>
      <div>
        <label for="channel">Channel</label>
        <select id="channel">
          <option value="agent_posp_imf_misp_direct">Individual Agent / Direct POSP / IMF / MISP (Direct)</option>
          <option value="other_channel">Other channels (no Additional Incentive)</option>
        </select>
      </div>
    </div>

    <button class="btn" id="calcBtn">Calculate payout</button>
  </div>

  <div class="card output">
    <div class="kpi">
      <div>
        <div class="label">Base commission %</div>
        <div class="value" id="baseCommission">-</div>
      </div>
      <div>
        <div class="label">Incentive %</div>
        <div class="value" id="incentivePct">-</div>
      </div>
      <div>
        <div class="label">Additional incentive %</div>
        <div class="value" id="additionalPct">-</div>
      </div>
      <div>
        <div class="label">Total payout %</div>
        <div class="value" id="totalPct">-</div>
      </div>
    </div>
    <div class="note">
      Notes:
      <ul>
        <li>Percentages per Annexure A1 (Motor) and “Additional Incentive” (Private Car only).</li>
        <li>Commission & incentive apply on Net Premium (OD & TP). For Bundled, TP incentive applies on yearly TP premium.</li>
        <li>OEM/Auto tie-ups excluded from commission & incentives.</li>
      </ul>
    </div>
  </div>

<script>
/* --- Data maps from Annexure A1 and Additional Incentive --- */

// State groups
const STATE_GROUPS = {
  twRestricted: new Set(["Tamil Nadu", "Kerala", "Karnataka", "Madhya Pradesh", "Assam"]),
  gcv_2000_3500: new Set(["Haryana", "Madhya Pradesh", "Rajasthan", "Tamil Nadu", "Uttar Pradesh"]),
  gcv_3500_7500: new Set(["Haryana", "Madhya Pradesh", "Rajasthan", "Tamil Nadu", "Uttar Pradesh"]),
  gcv_7500_10000: new Set(["Haryana", "Madhya Pradesh", "Rajasthan", "Tamil Nadu", "Uttar Pradesh"]),
  gcv_12000_20000: new Set(["Haryana", "Madhya Pradesh", "Rajasthan", "Tamil Nadu", "Uttar Pradesh", "Karnataka", "Kerala"]),
  gcv_20000_25000: new Set(["Haryana", "Madhya Pradesh", "Rajasthan", "Tamil Nadu", "Uttar Pradesh", "Karnataka", "Kerala"]),
  gcv_25000_35000: new Set(["Haryana", "Madhya Pradesh", "Rajasthan", "Tamil Nadu", "Uttar Pradesh", "Karnataka", "Kerala"]),
  gcv_gt_40000_restrict: new Set(["Haryana", "Madhya Pradesh", "Rajasthan", "Tamil Nadu", "Uttar Pradesh", "Karnataka", "Kerala"]),
  gcv_ecart_excluded: new Set(["Haryana", "Madhya Pradesh", "Rajasthan", "Tamil Nadu", "Uttar Pradesh", "Karnataka", "Kerala"]),
};

// Private Car (Non-Electric)
const PC_NON_ELECTRIC_GRID = {
  bundled: { new: {
    diesel_upto_1500: { commission: 10.0, incentive: 0.0 },
    above_2500_except_brands: { commission: 10.0, incentive: 0.0 },
    standard: { commission: 17.5, incentive: 10.0 }
  }},
  package: { renewal: {
    diesel_upto_1500: { commission: 5.0, incentive: 0.0 },
    above_2500_except_brands: { commission: 5.0, incentive: 0.0 },
    standard: { commission: 15.0, incentive: 5.0 }
  }},
  saod: { all: { commission: 12.0, incentive: 0.0 }},
  satp: { all: {
    diesel_upto_1500: { commission: 5.0, incentive: 0.0 },
    above_2500_except_brands: { commission: 5.0, incentive: 0.0 },
    standard: { commission: 15.0, incentive: 5.0 }
  }},
};

// Private Car (Electric)
const PC_ELECTRIC_GRID = {
  bundled: { new: { commission: 17.5, incentive: 10.0 } },
  package: { new: { commission: 17.5, incentive: 5.0 }, renewal: { commission: 12.0, incentive: 5.0 } },
  saod:    { new: { commission: 17.5, incentive: 5.0 }, renewal: { commission: 12.0, incentive: 5.0 } },
  satp:    { new: { commission: 17.5, incentive: 5.0 }, renewal: { commission: 12.0, incentive: 5.0 } }
};

// Two Wheeler
const TW_GRID = {
  bundled_package_satp: {
    upto_350: { commission: 5.0, incentive_other: 17.5, incentive_restricted: 0.0 },
    above_350: { commission: 5.0, incentive_other: 12.5, incentive_restricted: 0.0 },
    electric:  { commission: 5.0, incentive_other: 17.5, incentive_restricted: 0.0 }
  },
  saod: { commission: 20.0, incentive: 0.0 }
};

// GCV
const GCV_GRID = {
  gcv_le_2000: (state) => state === "Uttar Pradesh"
    ? { commission: 20.0, incentive: 0.0 }
    : { commission: 20.0, incentive: 37.5 },
  gcv_2001_3500: (state) => STATE_GROUPS.gcv_2000_3500.has(state)
    ? { commission: 15.0, incentive: 0.0 }
    : { commission: 15.0, incentive: 30.0 },
  gcv_3501_7500: (state) => STATE_GROUPS.gcv_3500_7500.has(state)
    ? { commission: 10.0, incentive: 0.0 }
    : { commission: 10.0, incentive: 17.5 },
  gcv_7501_10000: (state) => STATE_GROUPS.gcv_7500_10000.has(state)
    ? { commission: 10.0, incentive: 0.0 }
    : { commission: 10.0, incentive: 7.5 },
  gcv_10001_12000: (_) => ({ commission: 2.5, incentive: 0.0 }),
  gcv_12001_20000: (state) => STATE_GROUPS.gcv_12000_20000.has(state)
    ? { commission: 5.0, incentive: 0.0 }
    : { commission: 5.0, incentive: 10.0 },
  gcv_20001_25000: (state) => STATE_GROUPS.gcv_20000_25000.has(state)
    ? { commission: 5.0, incentive: 0.0 }
    : { commission: 5.0, incentive: 10.0 },
  gcv_25001_35000: (state) => STATE_GROUPS.gcv_25000_35000.has(state)
    ? { commission: 2.5, incentive: 0.0 }
    : { commission: 2.5, incentive: 10.0 },
  gcv_35001_40000: (_) => ({ commission: 2.5, incentive: 0.0 }),
  gcv_gt_40000: (state) => STATE_GROUPS.gcv_gt_40000_restrict.has(state)
    ? { commission: 0.0, incentive: 0.0 }
    : { commission: 0.0, incentive: 5.0 },
  gcv_ecart: (state) => STATE_GROUPS.gcv_ecart_excluded.has(state)
    ? { commission: 15.0, incentive: 0.0 }
    : { commission: 15.0, incentive: 35.0 }
};

// Misc Vehicles, Motor Trade, Standalone CPA
const MISC_GRID = {
  misc_ambulance: { commission: 20.0, incentive: 0.0 },   // All States
  misc_tractor:   { commission: 25.0, incentive: 0.0 },   // All States
  misc_other:     { commission: 10.0, incentive: 0.0 },   // All States
  motor_trade:    { commission: 5.0,  incentive: 0.0 },   // Road Risk, Transit & Internal Risk
  standalone_cpa: { commission: 15.0, incentive: 0.0 }    // All States
};

// Additional Incentive — Private Car only (Agents/POSP/IMF/MISP-Direct)
function calcAdditionalIncentivePC(ccBand, fuel, state, channel) {
  if (channel !== "agent_posp_imf_misp_direct") return 0.0;

  // No additional incentive for PC <=1000cc and >1200cc <=1500cc
  if (ccBand === "pc_upto_1000" || ccBand === "pc_1201_1500") return 0.0;

  // >1000 & <=1200 cc: Other than Karnataka, Haryana, Madhya Pradesh, Tamil Nadu
  if (ccBand === "pc_1001_1200") {
    const excluded = new Set(["Karnataka", "Haryana", "Madhya Pradesh", "Tamil Nadu"]);
    return excluded.has(state) ? 0.0 : 17.5; // OD 2.5 + TP 15.0
  }

  // >1500 & <=2000 cc: All States
  if (ccBand === "pc_1501_2000") return 17.5; // OD 2.5 + TP 15.0

  // Electric Vehicles: All States
  if (fuel === "electric") return 17.5;

  // >2000 cc: Other than KA, HR, MP, TN, RJ, UP
  if (ccBand === "pc_above_2000") {
    const excluded = new Set(["Karnataka", "Haryana", "Madhya Pradesh", "Tamil Nadu", "Rajasthan", "Uttar Pradesh"]);
    return excluded.has(state) ? 0.0 : 20.0; // OD 10.0 + TP 10.0
  }

  return 0.0;
}

/* --- Calculator logic --- */

function getBaseForPrivateCar(policyType, businessType, fuel, pcSegment) {
  if (fuel === "electric") {
    const g = PC_ELECTRIC_GRID[policyType];
    if (!g) return { commission: 0, incentive: 0 };
    const row = businessType === "new" ? g.new : g.renewal;
    return row || { commission: 0, incentive: 0 };
  }

  // Non-electric
  if (policyType === "bundled") {
    return PC_NON_ELECTRIC_GRID.bundled.new[pcSegment] || { commission: 0, incentive: 0 };
  } else if (policyType === "package") {
    return PC_NON_ELECTRIC_GRID.package.renewal[pcSegment] || { commission: 0, incentive: 0 };
  } else if (policyType === "saod") {
    return PC_NON_ELECTRIC_GRID.saod.all;
  } else if (policyType === "satp") {
    return PC_NON_ELECTRIC_GRID.satp.all[pcSegment] || { commission: 0, incentive: 0 };
  }
  return { commission: 0, incentive: 0 };
}

function getBaseForTwoWheeler(policyType, ccBand, fuel, state) {
  if (policyType === "saod") return TW_GRID.saod;

  const restricted = STATE_GROUPS.twRestricted.has(state);
  let bandKey = "upto_350";
  if (ccBand === "tw_above_350") bandKey = "above_350";
  if (fuel === "electric" || ccBand === "tw_electric_any") bandKey = "electric";

  const row = TW_GRID.bundled_package_satp[bandKey];
  const incentive = restricted ? row.incentive_restricted : row.incentive_other;
  return { commission: row.commission, incentive };
}

function getBaseForGCV(ccBand, state) {
  const fn = GCV_GRID[ccBand];
  if (!fn) return { commission: 0, incentive: 0 };
  return fn(state);
}

function getBaseForMisc(miscType) {
  const row = MISC_GRID[miscType];
  return row || { commission: 0.0, incentive: 0.0 };
}

function computePayout() {
  const vehicleClass = document.getElementById("vehicleClass").value;
  const policyType = document.getElementById("policyType").value;
  const businessType = document.getElementById("businessType").value;
  const fuel = document.getElementById("fuel").value;
  const ccBand = document.getElementById("ccBand").value;
  const pcSegment = document.getElementById("pcSegment").value;
  const state = document.getElementById("state").value;
  const channel = document.getElementById("channel").value;

  const btNorm = (policyType === "saod" || policyType === "satp") ? "all" : businessType;

  let commission = 0.0, incentive = 0.0, additional = 0.0;

  if (vehicleClass === "private_car") {
    const base = getBaseForPrivateCar(policyType, btNorm, fuel, pcSegment);
    commission = base.commission;
    incentive = base.incentive;
    additional = calcAdditionalIncentivePC(ccBand, fuel, state, channel);
  } else if (vehicleClass === "two_wheeler") {
    const base = getBaseForTwoWheeler(policyType, ccBand, fuel, state);
    commission = base.commission;
    incentive = base.incentive;
  } else if (vehicleClass === "gcv") {
    const base = getBaseForGCV(ccBand, state);
    commission = base.commission;
    incentive = base.incentive;
  } else if (vehicleClass === "misc") {
    const base = getBaseForMisc(ccBand);
    commission = base.commission;
    incentive = base.incentive;
  } else if (vehicleClass === "motor_trade") {
    const base = getBaseForMisc("motor_trade");
    commission = base.commission;
    incentive = base.incentive;
  } else if (vehicleClass === "standalone_cpa") {
    const base = getBaseForMisc("standalone_cpa");
    commission = base.commission;
    incentive = base.incentive;
  }

  const total = round2(commission + incentive + (additional || 0.0));

  document.getElementById("baseCommission").textContent = fmtPct(commission);
  document.getElementById("incentivePct").textContent = fmtPct(incentive);
  document.getElementById("additionalPct").textContent = fmtPct(additional || 0.0);
  document.getElementById("totalPct").textContent = fmtPct(total);
}

function fmtPct(n) { return `${round2(n)}%`; }
function round2(n) { return Math.round(n * 100) / 100; }

/* --- UI behavior --- */

function adaptUI() {
  const vc = document.getElementById("vehicleClass").value;
  const fuelEl = document.getElementById("fuel");
  const pcSegEl = document.getElementById("pcSegmentWrapper");
  const ccBandEl = document.getElementById("ccBandWrapper");
  const btEl = document.getElementById("businessType");
  const policyEl = document.getElementById("policyType");

  // Reset visibility
  fuelEl.parentElement.classList.remove("hidden");
  pcSegEl.classList.remove("hidden");
  ccBandEl.classList.remove("hidden");

  if (vc === "private_car") {
    // Segment irrelevant if Electric
    if (document.getElementById("fuel").value === "electric") {
      pcSegEl.classList.add("hidden");
    }
  } else if (vc === "two_wheeler") {
    pcSegEl.classList.add("hidden");
    // Business type normalization
    if (policyEl.value === "saod" || policyEl.value === "satp") btEl.value = "all";
    else btEl.value = "new";
  } else if (vc === "gcv") {
    fuelEl.parentElement.classList.add("hidden");
    pcSegEl.classList.add("hidden");
    btEl.value = "all";
  } else if (vc === "misc") {
    // Misc: uses ccBand to choose Ambulance/Tractor/Other; fuel/segment not applicable
    fuelEl.parentElement.classList.add("hidden");
    pcSegEl.classList.add("hidden");
    btEl.value = "all";
    // Ensure ccBand is one of misc options
    const miscOptions = ["misc_ambulance","misc_tractor","misc_other"];
    if (!miscOptions.includes(document.getElementById("ccBand").value)) {
      document.getElementById("ccBand").value = "misc_ambulance";
    }
  } else if (vc === "motor_trade") {
    fuelEl.parentElement.classList.add("hidden");
    pcSegEl.classList.add("hidden");
    btEl.value = "all";
    ccBandEl.classList.add("hidden"); // No sub-bands needed
  } else if (vc === "standalone_cpa") {
    fuelEl.parentElement.classList.add("hidden");
    pcSegEl.classList.add("hidden");
    btEl.value = "all";
    ccBandEl.classList.add("hidden"); // No sub-bands needed
  }
}

["vehicleClass", "fuel", "policyType"].forEach(id => {
  document.getElementById(id).addEventListener("change", adaptUI);
});

document.getElementById("calcBtn").addEventListener("click", () => {
  adaptUI();
  computePayout();
});

adaptUI();
computePayout();
</script>
</body>
</html>
